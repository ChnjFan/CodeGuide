---
icon: markdown
---

# 系统设计

> 系统设计是一项复杂且关键的任务，旨在创建高效、可靠且易维护的系统，很多大厂除了代码面试外，系统设计也是技术面试中的关键环节，学习如何设计可扩展性的系统将有助于你成一个优秀的工程师。
>
> 网络中关于系统设计原则的资源多如牛毛，本文通过整合收集资源，结合面试实践，帮助你学习如何构建可扩展性的系统。

## 介绍

什么是系统设计？简单来说，系统设计就是为了满足程序需求，设计出系统计算和存储等组件，确保各个组件之间能够协同工作，实现预期的功能和性能。

在软件开发中，系统设计通常包括：

1. 架构设计：确定系统的整体结构，包括各个模块的划分和相互关系。
2. 模块设计：对系统中的各个模块进行详细设计，明确其功能、接口和数据流。
3. 接口设计：设计模块之间以及系统与外部系统之间的交互方式，确保数据传输的正确性和安全性。
4. 数据设计：规划系统所需的数据结构和数据库设计，以支持高效的数据存储和访问。

随着业务的不断扩大，系统的需求和访问量也会随之不断增加。一个好的系统设计除了能有效满足当前的业务需求，也要适应未来的变化，确保系统高效运行。

## 一般性原则

如果你不熟悉系统设计，首先要对一般性原则有一个基本的认识。

### 可扩展性

假设你的网站突然变得很受欢迎，随着点击量的增加，你的网站服务器开始出现内存不足，CPU 利用率持续冲高，或者磁盘空间不足，此时应该如何扩展你的网站来支持更多用户来请求网站资源？

可扩展性就是系统在面对不断增长的工作负载或需求时，通过添加资源来维持或提升系统性能和功能的能力。

在计算机系统架构中，垂直扩展（Vertical Scaling）和水平扩展（Horizontal Scaling）是两种常见的扩展方式。

**垂直扩展**

对于本节开始的问题，最明显的解决方式就是增加内存、CPU 和磁盘空间容量，**垂直扩展就是在不修改应用程序或架构的情况下，只对现有服务器进行升级来提升其处理能力**。

垂直扩展在小规模系统中更具性价比，但随着规模不断扩大，硬件升级存在物理限制，无法无限制地提升性能。而且依赖单一服务器，如果服务器出现故障可能导致系统不可用。

**水平扩展**

**水平扩展是通过增加更多的服务器节点，将负载分散到多个机器上来提高系统的处理能力**。多个节点分担负载，某个节点故障不会影响系统的运行，还可以根据需求动态增加或减少节点，灵活应对业务变化。

系统支持水平扩展，需要设计负载均衡、数据一致性和分布式管理机制，这无疑增加了系统的复杂度。在多个节点之间保持数据一致性，也会带来额外的网络和存储开销。

所以选择垂直扩展还是水平扩展，取决于具体业务需求的规模、预算、技术架构和预期的系统负载。

**负载均衡**

水平扩展多个服务节点后，用户请求应该由哪个节点来处理？

负载均衡器就是将负载（用户请求）均匀分配到系统服务器上。例如，用户在与系统进行交互过程中，服务器 2 可能会在第一个请求中提供服务，然后服务器 9 为用户第二个请求提供服务。

## 参考资料

1. [system-design-primer]([donnemartin/system-design-primer: Learn how to design large-scale systems. Prep for the system design interview. Includes Anki flashcards.](https://github.com/donnemartin/system-design-primer/tree/master))
2. [CS75 (Summer 2012) Lecture 9 Scalability Harvard Web Development David Malan](https://www.youtube.com/watch?v=-W9F__D3oY4)
3. [Le Cloud Blog](https://web.archive.org/web/20221030091841/http://www.lecloud.net/tagged/scalability/chrono)

