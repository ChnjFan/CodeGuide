# 以太网协议

以太网协议是局域网核心技术标准，规定了设备间如何在有线介质（双绞线、光纤等）上传输数据，包括数据帧格式、物理接口、传输速率等关键规范，是局域网 “互联互通” 的底层保障。

[TOC]

## 数据帧结构

以太网数据帧是数据传输的基本单位。

```bash
+-----------+-----------+-------------+--------------------+----------+
|   DMAC    |   SMAC    |     Type    |          Data      |   FCS    |
|  6 Bytes  |  6 Bytes  |   2 Bytes   |  Variable length   | 4 Bytes  |
+-----------+-----------+-------------+--------------------+----------+
|                                                                     |
                                           |                 |
+-------------+-----------+----------------+-----------------+
|   帧间隙     |  前同步码   |  帧开始定界符    |  Ethernet Frame |
|至少12Bytes   | 7 Bytes   |  1 Byte        | Variable length |
+-------------+-----------+----------------+-----------------+
```

- 帧间隙：每个以太帧之间都要有帧间隙（Inter Frame Gap），以便让帧接收者对接收的帧做必要的处理（如调整缓存的指针、更新计数、通知对报文进行处理等等）。
- 前同步码： IEEE 802.3 标准规定长度 7 个字节，每个字节值为 0xAA。
- 帧开始定界符：固定为 0xAB。、
- 目的地址和源地址：MAC 地址，6字节，标识帧的接收者和发送者。
- 协议类型：IPv4（0x0800）、ARP（0x0806）、IPv6（0x86DD）VLAN标签帧（0x8100）。
- 有效载荷：46~1500 字节，以太网最大传输单元 MTU = 1500。
- 帧校验序列：以太网通常使用循环冗余校验 CRC。

以太网帧最小长度为 64 字节，有效载荷的长度如果小于 46 字节，填充字节 0 到尾部。

以太网最大帧长度为1518字节（14 字节的头部和 4 字节 CRC 校验码）。

