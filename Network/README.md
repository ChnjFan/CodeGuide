# TCP/IP 协议栈

> 本文内容均来自互联网公开内容进行的总结，用于系统性学习计算机网络。

[TOC]

## 网络协议

计算机网络协议是实现计算机之间数据通信的规则和标准，按照功能模块拆分为五层，通过定义互联网协议来实现具体的功能。

### 应用层

应用层用于规定应用程序的数据格式，不用关心数据如何传输，只需要专注于用户提供应用功能。

- :fire: ​[HTTP 协议](./Protocol/http.md) - 超文本传输协议。
- :fire: ​[DNS 协议](./Protocol/dns.md) - 域名系统协议，用于域名与 IP 地址的映射。
- :fire: ​[TLS 协议](./Protocol/tls.md) - 传输层安全协议，为 TCP 链接提供加密、身份验证和数据完整性校验。

### 传输层

传输层通过**端口**（port）建立主机**端到端**的通信链路，只要确定主机和端口即可实现应用层的通信。

- :fire: ​[TCP 协议](./Protocol/tcp.md) - 可靠传输，流量控制、超时重传、拥塞控制等。
- [UDP 协议](./Protocol/udp.md) - 只负责发送数据包，不保证数据包能够发送到对端。实时性更高，传输效率高。

### 网络层

网络层主要负责**跨网络的数据包传输与路由**，连接不同类型网络之间的通信。主要功能包括：路由转发、分片和重组。

- :fire: ​[IP 协议](./Protocol/ip.md) -  网络层引入 IP 地址，通过子网掩码确定计算机所在子网，确定子网后根据 MAC 地址将数据包传送到子网的目标网卡。
- [ARP 协议](./Protocol/arp.md) - 负责 IP 地址与 MAC 地址之间的映射。
- [NDP 协议](./Protocol/ndp.md) - IPv6 的邻居发现协议，用来替代 ARP 和 ICMP 路由发现/重定向功能。
- [ICMP 协议](./Protocol/icmp.md) - 互联网控制报文协议，传递 IP 协议层配置和 IP 数据包的控制信息和错误报告。
- [NAT](./Protocol/nat.md) - 网络地址转换，将内网的私有 IP 转换成公网 IP。
- [DNS](./Protocol/dns.md) - 网络地址转换，将内网的私有 IP 转换成公网 IP。
- [DHCP 协议](./Protocol/dhcp.md) - 动态主机配置协议，用于自动分配 IP 地址和网络配置。

#### 单播协议

路由表决定了数据报的转发路径，通过最长前缀匹配查找精确路由。

- **IGP**：内部网关协议，用于同一自治系统（AS）内部。
  - [RIP 协议](./Protocol/rip.md) - 路由信息协议，基于跳数的距离矢量协议，适用于小型网络。
  - [OSPF 协议](./Protocol/ospf.md) - 开放最短路径优先，基于链路状态的协议，适用于中大型网络，收敛速度快。
  - [IS-IS 协议](./Protocol/Isis.md) - 中间系统到中间系统，基于链路状态的协议，支持更大规模网络，路由计算效率高。
- **EGP**：外部网关协议，用于不同自治系统之间。
  - [BGP 协议](./Protocol/bgp.md) - 边界网关协议，互联网核心路由协议，基于路径属性选择最佳路由，连接不同运营商网络。

#### 组播协议

组播是一种高效的网络通信模式，实现单点发送、多点接收的数据传输，降低网络带宽消耗并提升传输效率。

- [组播基础](./Protocol/multicast.md) - 组播概念，组播地址以及组播数据报文下一跳选择与报文上送。

- [IGMP 协议](./Protocol/igmp.md) - 互联网组管理协议，管理组播通信，主机通过 IGMP 通告路由器加入或离开某个组播组。
- [MLD 协议](./Protocol/mld.md) - 组播侦听发现协议，负责管理 IPv6 组播成员，在 IPv6 主机与其直连组播设备之间建立维护成员关系。
- [PIM 协议](./Protocol/pim.md) - 协议无关组播，用于在 IP 网络实现组播数据的高效转发。

#### 路由策略

路由策略是一套决定数据包如何从源主机通过网络到达目标主机的规则和机制，核心是在复杂网络拓扑中选择最优路径，实现流量控制、负载均衡和网络安全等。

- [IPsec](./Protocol/ip_security.md) - 在 IP 层提供安全服务的协议套件，用于构建 VPN。

### 数据链路层

链路层为网络层提供数据传输服务，为 IP 模块接收和发送 IP 数据报，负责在以太网、Wi-Fi 等底层网络发送原始数据包。

- **局域网（LAN）**：局域网协议用于小范围内的设备互联，实现高效传输和设备发现。
  - [以太网协议](./Protocol/ethernet.md) - 最主流的局域网协议，定义物理层和数据链路层规范。
  - [VLAN](./Protocol/vlan.md) - 虚拟局域网，将一个物理的 LAN 在逻辑上划分成多个广播域的通信技术。
  - [LACP 协议](./Protocol/lacp.md) - 链路聚合控制协议，将多条物理以太网链路 “捆绑” 成一条逻辑链路，实现**带宽叠加、冗余备份、负载均衡**。
  - [WLAN](./Protocol/wlan.md) - 无线局域网协议，解决无线设备互联和数据传输。
  - [QinQ 技术](./Protocol/qinq.md) - 基于以太网 802.1Q 标签协议的**双层 VLAN 标签封装技术**。
- **广域网（WAN）**：广域网协议用于跨地域的网络互联，核心是长距离传输和路由选择。
  - [PPP 协议](./Protocol/ppp.md) - 用于两个设备直接连接（如路由器与运营商设备），支持身份认证（PAP/CHAP）、动态 IP 分配，适用于拨号、专线等场景。
  - [HDLC 协议](./Protocol/hdlc.md) - 面向比特的同步协议，效率高、差错控制强，常用于路由器之间的专线连接。
- [STP 协议](./Protocol/stp.md) - 生成树协议是**二层网络环路防护与冗余优化技术**。

### 物理层

通过光缆、电缆、双绞线、无线电波等介质将计算机连接起来。

## 网络应用

- [QoS](./Protocol/qos.md) - 服务质量（Quality of Service）用来为特定应用或数据流提供有保障的传输性能。
- [DPI](./Protocol/qos.md) - 深度包检测

## 网络工具

- [tcpdump](./Tools/tcpdump.md) - 命令行抓包工具。
- [ifconfig](./Tools/ifconfig.md) - 查看网络接口信息。
- [netstat](./Tools/netstat.md) - 查看网络状态和连接信息。
