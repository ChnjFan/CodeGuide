# 计算机网络

> 计算机网络的核心是网络协议，详细规定了计算机之间如何连接和组网。理解了网络协议，就理解了互联网的原理。

## 网络协议概念

计算机网络协议是实现计算机之间数据通信的规则和标准。

### 分层模型

计算机网络的实现分为五层，每层都有自己的功能，通过定义互联网协议来实现具体的功能。

#### 应用层

应用层用于规定应用程序的数据格式，不用关心数据如何传输，只需要专注于用户提供应用功能。

- [HTTP 详解](./Protocol/http.md)

#### 传输层

传输层通过**端口（port）**来区分数据包通过哪个程序下发的应用层数据包。

端口是 0 到 65535 之间的整数，传输层就是建立**端口到端口**的通信，只要确定主机和端口即可实现程序之间的交流。

- [Socket](./socket.md) - 主机+端口。
- [TCP 协议](./Protocol/tcp.md) - 可靠传输，流量控制、超时重传、拥塞控制等。
- [UDP 协议](./Protocol/udp.md) - 将应用层数据前加上端口号信息。只负责发送数据包，不保证数据包能够发送到对端。实时性更高，传输效率高。

#### 网络层

网络层是通信子网中的最高层，其主要功能是管理网络中的数据通信，控制数据链路层与传输层之间的信息转发、建立、维持和终止网络的连接，将数据从源端经过若干节点传输到目的端（点到点）。  

##### IP 协议

网络层引入 IP 地址，通过子网掩码确定计算机所在子网，确定子网后根据 MAC 地址将数据包传送到子网的目标网卡。

- IPv4：网络地址由 32 位组成。

##### ARP 协议

负责 IP 地址与 MAC 地址之间的映射。

#### 数据链路层

链路层为网络层提供数据传输服务，负责在以太网、WiFi 等底层网络发送原始数据包。

##### 以太网协议

以太网规定一组电信号构成一个数据包——帧（Frame），每一帧由标头和数据组成。

- 标头：MAC 地址信息，数据类型，固定 18 字节。
- 数据：IP 报文，最长 1500 字节，最短 46 字节。

##### MAC 地址

网卡中标记的地址，数据包中发送地址和接收地址叫做 MAC 地址，24 位组成。

网卡出厂时厂商标记，前 12 位是厂商编号，后 12 位是网卡流水号。

##### 广播

以太网将数据包向本网络内所有计算机发送，然后由计算机判断是否为接收方。

接收到数据的计算机获取到数据包的目的 MAC 地址与自身地址相比，如果不同就丢弃数据包。

ARP 表查找不到后才会使用广播发送数据。

#### 物理层

通过光缆、电缆、双绞线、无线电波等介质将计算机连接起来。
